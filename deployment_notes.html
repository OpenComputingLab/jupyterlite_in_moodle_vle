
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Deployment Notes &#8212; JupyterLite on OU Moodle VLE</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=a8e58a58"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'deployment_notes';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Building Standalone Distributions" href="standalone_distribution.html" />
    <link rel="prev" title="Technical Overview" href="technical_overview.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">JupyterLite on OU Moodle VLE</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="index.html">
                    Embedding Standalone Jupyter Environments in the OU Moodle VLE
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Motivation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="motivation.html">Motivation and Rationale</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Example Use Cases</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="embedding_jupyterlab.html">Embedding JupyterLab and Jupyter Notebook in Moodle VLE Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="embedding_a_notebook.html">Embedding a Single Notebook</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Development and Installation Notes</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="technical_overview.html">Technical Overview</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Deployment Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="standalone_distribution.html">Building Standalone Distributions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Configuring Programming Language Kernels</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="custom_xeus_python.html">Creating Customised Xeus Python Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="embedding_webr.html">Embedding WebR</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">"Micro" Embedded Enviromments and Applications</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="wasm-applications.html">Embedded WebAssembly (WASM) Applications</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Deployment Notes</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-deployment-repositories">Example deployment repositories</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#m348-jupyterlite-webr-kernel-webr-kernel-repo-r-package-repo">M348 JupyterLite (<code class="docutils literal notranslate"><span class="pre">WebR</span></code> kernel) + WebR kernel repo, R package repo)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tm112-block-2-notebooks-xeus-python-kernel">TM112 Block 2 notebooks (<code class="docutils literal notranslate"><span class="pre">xeus-python</span></code> kernel)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bundling-for-ou-vle">BUNDLING FOR OU VLE</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-jupyterlite-xeus-python-distribution">Example JupyterLite Xeus Python distribution</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-jupyterlite-r-distribution">Example JupyterLite R distribution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-as-a-standalone-offline-application">Running as a standalone / offline application</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#customisations-for-webr-e-g-m348">Customisations for webR (e.g. M348)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#borkedness">BORKEDNESS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#open-issues">OPEN ISSUES</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="deployment-notes">
<h1>Deployment Notes<a class="headerlink" href="#deployment-notes" title="Link to this heading">#</a></h1>
<p>JupyterLite environments can be deployed via the VLE in two main ways:</p>
<ul class="simple">
<li><p>link to a URL of the JupyterLite site running on a public URL;</p></li>
<li><p>upload the modded JupyterLite site as an <code class="docutils literal notranslate"><span class="pre">HTML5.zip</span></code> activity bundle;</p></li>
</ul>
<section id="example-deployment-repositories">
<h2>Example deployment repositories<a class="headerlink" href="#example-deployment-repositories" title="Link to this heading">#</a></h2>
<p>Example GitHub repositories that build the html5.zip packages using GitHub Axctions, and then make the artefacts available as build job artefacts. <code class="docutils literal notranslate"><span class="pre">[TO</span> <span class="pre">DO</span> <span class="pre">-</span> <span class="pre">also</span> <span class="pre">push</span> <span class="pre">the</span> <span class="pre">build</span> <span class="pre">package</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">repo</span> <span class="pre">somewhere.]</span></code></p>
<section id="m348-jupyterlite-webr-kernel-webr-kernel-repo-r-package-repo">
<h3>M348 JupyterLite (<code class="docutils literal notranslate"><span class="pre">WebR</span></code> kernel) + WebR kernel repo, R package repo)<a class="headerlink" href="#m348-jupyterlite-webr-kernel-webr-kernel-repo-r-package-repo" title="Link to this heading">#</a></h3>
<p>The JupyterLite distribution is built using an action in <a class="reference external" href="https://github.com/ouseful-testing/jupyterlite-webr-kernel"><code class="docutils literal notranslate"><span class="pre">ouseful-testing/jupyterlite-webr-kernel</span></code></a>; this constructs a custom web Jupyterlite kernel and then creates a JupyterLite distribution that makes use of it. The zipped distribution is uploaded as an action artefact and can be uploaded to Moodle as an HTML5.zip package.</p>
<p>The jupyterlite-webr-kernel builds a self-contained web distribution with package and webr files distributed alongside the jupyterlite environment; the R packages are currently custom built in the <a class="reference external" href="https://github.com/ouseful-testing/webr-package-repo-demo"><code class="docutils literal notranslate"><span class="pre">ouseful-testing/webr-package-repo-demo</span></code></a> repo and then placed in the webr-package-repo-demo repo packages_wasmbuilt directory.</p>
<p>A desktop runnable bundled executable version is built using <a class="reference external" href="https://github.com/ouseful-testing/m348-jupyterlite-distro"><code class="docutils literal notranslate"><span class="pre">ouseful-testing/m348-jupyterlite-distro</span></code></a> and uploaded as the Action artefact <code class="docutils literal notranslate"><span class="pre">m348-jupyterlite-html5zip-distribution.zip</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">TO</span> <span class="pre">DO</span> <span class="pre">-</span> <span class="pre">produce</span> <span class="pre">a</span> <span class="pre">set</span> <span class="pre">of</span> <span class="pre">build</span> <span class="pre">actions</span> <span class="pre">that</span> <span class="pre">can</span> <span class="pre">work</span> <span class="pre">in</span> <span class="pre">a</span> <span class="pre">single</span> <span class="pre">repo</span></code></p>
</section>
<section id="tm112-block-2-notebooks-xeus-python-kernel">
<h3>TM112 Block 2 notebooks (<code class="docutils literal notranslate"><span class="pre">xeus-python</span></code> kernel)<a class="headerlink" href="#tm112-block-2-notebooks-xeus-python-kernel" title="Link to this heading">#</a></h3>
<p>Repo: <a class="reference external" href="https://github.com/ouseful-demos/jupyterlite-tm112-demo"><code class="docutils literal notranslate"><span class="pre">ouseful-demos/jupyterlite-tm112-demo</span></code></a></p>
<p>A Github Action builds the HTML5.zip artefact.</p>
<p>The file upladed as the Action artfect (<code class="docutils literal notranslate"><span class="pre">tm112-jupyterlite-html5zip-distribution.zip</span></code>) is the file that should be uploadable to Moodle as an HTML5.zip package.</p>
</section>
</section>
<section id="bundling-for-ou-vle">
<h2>BUNDLING FOR OU VLE<a class="headerlink" href="#bundling-for-ou-vle" title="Link to this heading">#</a></h2>
<p>Currently, we need some hacks to the jupyterlite distribtuion when bundling it for OU VLE / HTML5.zip:</p>
<ul class="simple">
<li><p>filenames only allow [a-zA-Z-_]; so e.g. spaces in e.g. notebook filenames throw an error;</p></li>
<li><p>the <code class="docutils literal notranslate"><span class="pre">index.html</span></code> pages in <code class="docutils literal notranslate"><span class="pre">lab/</span></code>, <code class="docutils literal notranslate"><span class="pre">tree/</span></code> and <code class="docutils literal notranslate"><span class="pre">notebooks/</span></code> need updating: <code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">rel=&quot;manifest&quot;</span> <span class="pre">href=&quot;/app.webmanifest&quot;</span> <span class="pre">/&gt;</span> </code> needs to be set to <code class="docutils literal notranslate"><span class="pre">&lt;link</span> <span class="pre">rel=&quot;manifest&quot;</span> <span class="pre">href=&quot;/app.webmanifest&quot;</span> <span class="pre">crossorigin=&quot;use-credentials&quot;</span> <span class="pre">/&gt;</span></code> to handle the auth; NOTE: in more recent JupyterLite builds, the path seems to be to <code class="docutils literal notranslate"><span class="pre">../app.webmanifest</span></code>; the following should replace it: <code class="docutils literal notranslate"><span class="pre">sed</span> <span class="pre">-i</span> <span class="pre">'s|&lt;link</span> <span class="pre">rel=&quot;manifest&quot;</span> <span class="pre">href=&quot;\([^&quot;]*\)&quot;</span> <span class="pre">/&gt;|&lt;link</span> <span class="pre">rel=&quot;manifest&quot;</span> <span class="pre">href=&quot;\1&quot;</span> <span class="pre">crossorigin=&quot;use-credentials&quot;</span> <span class="pre">/&gt;|'</span> <span class="pre">./static/lab/index.html</span></code> (on Mac, we need <code class="docutils literal notranslate"><span class="pre">sed</span> <span class="pre">-i</span> <span class="pre">'.bak'</span> <span class="pre">...</span></code> (requires <code class="docutils literal notranslate"><span class="pre">''</span></code> (no backup) or a backup filename suffix, such as <code class="docutils literal notranslate"><span class="pre">.bak</span></code>)); <a class="reference external" href="https://github.com/jupyterlite/jupyterlite/pull/1357">related open PR on JupyterLite repo</a>;</p></li>
<li><p>the html5zip is referenced in an iframe with a load of URL parameters added to it by the VLE; this prevents the automatic redirect to eg <code class="docutils literal notranslate"><span class="pre">lab/index.html</span></code>; solution (h/t <a class="reference external" href="http://Claude.ai">Claude.ai</a>) is to strip the URL of unwanted params (note that this currently breaks the history/back button for the corresponding browser tab). We need to clean the URL of unwanted parameters. One fix is to modify <code class="docutils literal notranslate"><span class="pre">./config-utils.js</span></code> as follows (a copy of the required updated file can be found <a class="reference external" href="https://github.com/OpenComputingLab/jupyterlite_in_moodle_vle/tree/main/resources">here</a>) :</p></li>
</ul>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// Add this function</span>
<span class="kd">function</span><span class="w"> </span><span class="nx">stripUriParameters</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">URL</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">);</span>
<span class="w">  </span><span class="kd">const</span><span class="w"> </span><span class="nx">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">url</span><span class="p">.</span><span class="nx">searchParams</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="nx">url</span><span class="p">.</span><span class="nx">search</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// The path parameter at least is valid</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">url</span><span class="p">.</span><span class="nx">searchParams</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">path</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="nb">window</span><span class="p">.</span><span class="nx">history</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">({},</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">url</span><span class="p">);</span>
<span class="w">  </span><span class="c1">//That actually trashes the page history.</span>
<span class="w">  </span><span class="c1">// May be better to use: window.history.pushState({}, &#39;&#39;, url.toString());</span>
<span class="p">}</span>

<span class="c1">// Then as the first line of function main(), add:</span>
<span class="c1">//  stripUriParameters();</span>
</pre></div>
</div>
<ul class="simple">
<li><p>to create the zip, we need an <code class="docutils literal notranslate"><span class="pre">index.html</span></code> at the root of the zip folder; wheree a JupyterLite distribution asset is created by a GitHub action as qa zip file, unzip and untar the JupyterLite asset uploaded by the action, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into it and then (after any mods e.g. to <code class="docutils literal notranslate"><span class="pre">index.html</span></code> files), zip  the directory as root into a <code class="docutils literal notranslate"><span class="pre">.zip</span></code> archive file, e.g. <code class="docutils literal notranslate"><span class="pre">zip</span> <span class="pre">-r</span> <span class="pre">../jupyterlite-dist-tm112.zip</span> <span class="pre">.</span></code>. If zipping a git tracked dir, add <code class="docutils literal notranslate"><span class="pre">--exclude</span> <span class="pre">&quot;*.git*&quot;</span></code> to the zip command to ignore git files. Alternatively, a Github action can be used to zip the contents of the distribution directory and create an uploaded artefact that can be downloaded as then uploaded to Moodle VLE as an htmlzip in the appropriate form:</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># In the following, the JupyerLite output directory</span>
<span class="c1"># is set to: dist-tm112-jupyterlite</span>
<span class="c1"># E.g. using the build caommand:</span>
<span class="c1"># jupyter lite build --contents content --output-dir dist-tm112-jupyterlite</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload JupyterLite site artifact</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-artifact@v4</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tm112-jupyterlite-html5zip-distribution</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">            </span><span class="no">dist-tm112-jupyterlite/</span>
<span class="w">            </span><span class="no">!.git</span>
<span class="w">            </span><span class="no">!.git/**</span>
</pre></div>
</div>
<ul class="simple">
<li><p>to get the html5 bundle URL, upload the html5.zip as an HTML5.zip resource type; view the associated page; the JupyterLite environment is in the embedded iframe but gets stuck on the <code class="docutils literal notranslate"><span class="pre">./index.html</span></code> page; right click on the iframe (which will be blank ) and view it in a separate window to get the URL of the embedded html5 content; or, in browser dev tools, inspect page in to find the associated iframe and its <code class="docutils literal notranslate"><span class="pre">src</span></code> value. Take this path and extend it to point to eg <code class="docutils literal notranslate"><span class="pre">lab/index.html</span></code> rather than <code class="docutils literal notranslate"><span class="pre">./index.html</span></code>; you should now be able to use this link as an embedded URL link to display the lab environment in a Moodle page.</p></li>
</ul>
</section>
<section id="example-jupyterlite-xeus-python-distribution">
<h2>Example JupyterLite Xeus Python distribution<a class="headerlink" href="#example-jupyterlite-xeus-python-distribution" title="Link to this heading">#</a></h2>
<p>In a Xeus Pyhton distribution, we can “preinstall” any packages required by notebooks into the kernel.</p>
<p>Example <code class="docutils literal notranslate"><span class="pre">build_environment.yml</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xeus-kernels</span>
<span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://repo.mamba.pm/emscripten-forge</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jupyter_server</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jupyterlite-core &gt;=0.3.0,&lt;0.4.0</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jupyterlite-xeus&gt;=0.2.0a0,&lt;0.3</span>
</pre></div>
</div>
<p>Example <code class="docutils literal notranslate"><span class="pre">environment.yml</span></code> - build the following packages into the JupyterLite kernel:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xeus-python-kernel</span>
<span class="nt">channels</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://repo.mamba.pm/emscripten-forge</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">conda-forge</span>
<span class="nt">dependencies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pip</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xeus-python</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pandas</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">matplotlib</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ipywidgets</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">requests</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">folium</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">pip</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ipython-magic-folium</span>
</pre></div>
</div>
<p>We can also add a separate <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> to bundle and install extensions in the JupyterLite application.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Core modules (mandatory)
jupyterlite-core
jupyterlab
notebook

jupyterlite-xeus

# Python kernel (optional)
#jupyterlite-pyodide-kernel

# JavaScript kernel (optional)
#jupyterlite-javascript-kernel==0.2.3

# Language support (optional)
jupyterlab-language-pack-fr-FR
jupyterlab-language-pack-zh-CN

# Jupyer environment extensions
jupyterlab-filesystem-access

jupyterlab-empinken-extension
jupyterlab-cell-status-extension
jupyterlab-ou-brand-extension
</pre></div>
</div>
<p><em>TO DO / TO CHECK — what actually gets bundled and what gets added into the kernel as a preinstalled package? Are all packages listed in <code class="docutils literal notranslate"><span class="pre">environment.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> bundled in the distribution? [From a quick look, it looks like they are all in the distribution; and perhaps the packages in the environment.yaml are installed into the kernel?]</em></p>
<p>Example action for bundling a xeus Pyhton jupyterlite distribution:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build and Deploy</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;*&#39;</span>
<span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Checkout</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Setup Python</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v5</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.12&#39;</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install mamba</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mamba-org/setup-micromamba@v1</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">micromamba-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;1.5.8-0&#39;</span>
<span class="w">          </span><span class="nt">environment-file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build_environment.yml</span>
<span class="w">          </span><span class="nt">cache-environment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install the dependencies</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">python -m pip install -r requirements.txt</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build the JupyterLite site</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">cp README*.md content</span>
<span class="w">          </span><span class="no">jupyter lite build --contents content --output-dir dist</span>

<span class="w">    </span><span class="c1"># We can use the uploaded artifact </span>
<span class="w">    </span><span class="c1"># as the basis for an HTML5.zip upload</span>
<span class="w">    </span><span class="c1"># BUT see elsewhere for required hacks</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload artifact</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-pages-artifact@v3</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jupyterlite_dist</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./dist</span>
</pre></div>
</div>
<section id="example-jupyterlite-r-distribution">
<h3>Example JupyterLite R distribution<a class="headerlink" href="#example-jupyterlite-r-distribution" title="Link to this heading">#</a></h3>
<p>Example requirements:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>jupyterlab-widgets==3.0.10
jupyterlab~=4.1.8
jupyterlite-core&gt;=0.3.0
notebook~=7.1.3

# Kernel
git+https://github.com/r-wasm/jupyterlite-webr-kernel.git

# Branding and OU extensions
jupyterlab-ou-brand-extension==0.2.3

# Notebook cell tools
jupyterlab-cell-status-extension==0.2.2
jupyterlab-empinken-extension==0.5.2
jupyterlab-myst==2.4.0
jupyterlab-spellchecker==0.8.4

# File browsing and handling
jupyterlab-unfold==0.3.0
jupyter-archive==3.4.0
jupyterlab-filesystem-access==0.6.0
</pre></div>
</div>
<p>Example action:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy</span>

<span class="nt">on</span><span class="p">:</span>
<span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span>
<span class="w">  </span><span class="nt">push</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">pull_request</span><span class="p">:</span>
<span class="w">    </span><span class="nt">branches</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">main</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">release</span><span class="p">:</span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">published</span><span class="p p-Indicator">]</span>

<span class="nt">jobs</span><span class="p">:</span>
<span class="w">  </span><span class="nt">build</span><span class="p">:</span>
<span class="w">    </span><span class="nt">runs-on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class="w">    </span><span class="nt">steps</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v4</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Set up Python</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/setup-python@v5</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">python-version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.11&#39;</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upgrade pip</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">python -m pip install --upgrade pip</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build jupyterlite</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">python -m pip install -r requirements.txt</span>
<span class="w">          </span><span class="no">jupyter lite build --contents content --output-dir dist</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Build the JupyterLite site</span>
<span class="w">        </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<span class="w">          </span><span class="no">cp README.md content</span>
<span class="w">          </span><span class="no">jupyter lite build --contents content --output-dir dist</span>
<span class="w">        </span>
<span class="w">    </span><span class="c1"># We can use the uploaded artifact </span>
<span class="w">    </span><span class="c1"># as the basis for an HTML5.zip upload</span>
<span class="w">    </span><span class="c1"># BUT see elsewhere for required hacks</span>

<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload artifact</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">actions/upload-pages-artifact@v3</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./dist</span>

<span class="w">    </span><span class="c1"># Optionally publish the site to GitHub pages</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GitHub Pages action</span>
<span class="w">        </span><span class="nt">uses</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">peaceiris/actions-gh-pages@v3.6.1</span>
<span class="w">        </span><span class="nt">with</span><span class="p">:</span>
<span class="w">          </span><span class="nt">github_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ secrets.GITHUB_TOKEN }}</span>
<span class="w">          </span><span class="nt">publish_dir</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">./dist</span>
</pre></div>
</div>
</section>
</section>
<section id="running-as-a-standalone-offline-application">
<h2>Running as a standalone / offline application<a class="headerlink" href="#running-as-a-standalone-offline-application" title="Link to this heading">#</a></h2>
<p>To run the application offline, or as a standalone application, we need to ensure that all files are bundled as part of the JupyterLite distribution.</p>
<p>If any packages outside the core distribution are required in order to run particular notebooks, these packages will need to be shipped as part of the distribution and made available to the appropriate kernel.</p>
<p>By default, the <code class="docutils literal notranslate"><span class="pre">jupyterlite-webr</span></code> kernel will look to a remote URL to install and load packages on demand. The target URL can be set via an option within a notebook, or baked into the kernel as a default at run time.</p>
</section>
<section id="customisations-for-webr-e-g-m348">
<h2>Customisations for webR (e.g. M348)<a class="headerlink" href="#customisations-for-webr-e-g-m348" title="Link to this heading">#</a></h2>
<p>For standalone operation in M348, which uses the <code class="docutils literal notranslate"><span class="pre">jupyterlite-webr</span></code> kernel, we need to bundle required packages, as well as the webR base package, into the JupyterLite distribution:</p>
<ul class="simple">
<li><p>example of creating custom built webR packages: <a class="github reference external" href="https://github.com/ouseful-testing/webr-package-repo-demo/">ouseful-testing/webr-package-repo-demo</a> ; note that we need to match the R version with the R kernel version; in JupyterLite R kernel, this currently lags the main webR R version; the built packages can be downloaded as workload assets the placed where there need to be;</p></li>
<li><p>we can set the package download path in an R notebook code cell: <code class="docutils literal notranslate"><span class="pre">options(webr_pkg_repos=</span> <span class="pre">&quot;https://ouseful-demos.github.io/jupyterlite-m348-demo/repo/&quot;)</span></code>;</p></li>
<li><p>also also need to fix the path to the <code class="docutils literal notranslate"><span class="pre">webr</span></code> wasm packages; this can be done from a <a class="reference external" href="https://github.com/ouseful-testing/jupyterlite-webr-kernel/tree/th-custom-path">custom build</a> of the <code class="docutils literal notranslate"><span class="pre">jupyterlite-webr-kernel</span></code> by setting the path in build config files as per <a class="reference external" href="https://github.com/ouseful-testing/jupyterlite-webr-kernel/issues/1">here</a>.</p></li>
</ul>
</section>
<section id="borkedness">
<h2>BORKEDNESS<a class="headerlink" href="#borkedness" title="Link to this heading">#</a></h2>
<p>Issues in notebooks:</p>
<ul class="simple">
<li><p>JupyterLite now seems to drop explicit reference to <code class="docutils literal notranslate"><span class="pre">index.html</span></code> from the notebook homepage toc links; which breaks the VLE handler and means we can’t open notebooks from the notebook index / ToC homepage.</p></li>
</ul>
<p>Issues in JupyterLab:</p>
<ul class="simple">
<li><p>notebooks are behaving erratically on scroll; <code class="docutils literal notranslate"><span class="pre">jupyterlab-myst</span></code> may be contributing to this, or they may be a deeper seated Jupyter UI issue.</p></li>
</ul>
</section>
<section id="open-issues">
<h2>OPEN ISSUES<a class="headerlink" href="#open-issues" title="Link to this heading">#</a></h2>
<p>For distribution into secure enviromments, <em>everything</em> will need to be bundled into an <code class="docutils literal notranslate"><span class="pre">html5.zip</span></code> bundle.</p>
<p>To explore:</p>
<ul class="simple">
<li><p>use something like <code class="docutils literal notranslate"><span class="pre">esbuild</span></code> to bundle all assets into a js bundle <em>(I have no experience as yet with bundling web resources…)</em>; this will include the need to bundle third party packages and their dependencies as well as wasm packages. (Serving wasm packages may require mime-type settings updates on the VLE..)</p></li>
</ul>
<p><em>If anyone wants to team up exploring any of the above, please email me: <code class="docutils literal notranslate"><span class="pre">tony.hirst&#64;open.ac.uk</span></code>.</em></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="technical_overview.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Technical Overview</p>
      </div>
    </a>
    <a class="right-next"
       href="standalone_distribution.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Building Standalone Distributions</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-deployment-repositories">Example deployment repositories</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#m348-jupyterlite-webr-kernel-webr-kernel-repo-r-package-repo">M348 JupyterLite (<code class="docutils literal notranslate"><span class="pre">WebR</span></code> kernel) + WebR kernel repo, R package repo)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tm112-block-2-notebooks-xeus-python-kernel">TM112 Block 2 notebooks (<code class="docutils literal notranslate"><span class="pre">xeus-python</span></code> kernel)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bundling-for-ou-vle">BUNDLING FOR OU VLE</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-jupyterlite-xeus-python-distribution">Example JupyterLite Xeus Python distribution</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-jupyterlite-r-distribution">Example JupyterLite R distribution</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-as-a-standalone-offline-application">Running as a standalone / offline application</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#customisations-for-webr-e-g-m348">Customisations for webR (e.g. M348)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#borkedness">BORKEDNESS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#open-issues">OPEN ISSUES</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Tony Hirst
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>